service: ef-cms-puppeteer
custom:
  stage: ${opt:stage, 'dev'}
  region: ${opt:region, 'us-east-1'}

provider:
  name: aws
  stage: ${self:custom.stage}
  region: ${self:custom.region}
  runtime: nodejs10.x
  deploymentBucket:
    name: ${env:SLS_DEPLOYMENT_BUCKET}
    serverSideEncryption: AES256

layers:
  puppeteer:
    name: ${self:provider.stage}-puppeteer
    description: Chrome headless binary provided via chrome-aws-lambda and puppeteer-core for interaction.
    compatibleRuntimes:
      - nodejs8.10
    path: runtimes/puppeteer
    package:
      exclude:
        - puppeteer_lambda_layer.tar.gz
    retain: true
