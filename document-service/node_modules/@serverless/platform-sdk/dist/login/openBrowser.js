'use strict';

/* eslint-disable no-console */

var opn = require('opn');
var chalk = require('chalk');
var isDockerContainer = require('is-docker');

function displayManualOpenMessage(url, err) {
  // https://github.com/sindresorhus/log-symbols
  console.log('---------------------------');
  var errMsg = err ? `\nError: ${err.message}` : '';
  var msg = `Unable to open browser automatically${errMsg}`;
  console.log(`ðŸ™ˆ  ${chalk.red(msg)}`);
  console.log(chalk.green('Please open your browser & open the URL below to login:'));
  console.log(chalk.yellow(url));
  console.log('---------------------------');
  return false;
}

module.exports = function openBrowser(url) {
  var browser = process.env.BROWSER;
  if (browser === 'none' || isDockerContainer()) {
    return displayManualOpenMessage(url);
  }
  if (process.platform === 'darwin' && browser === 'open') {
    browser = undefined;
  }
  var options = { wait: false, app: browser };
  return opn(url, options).catch(function (err) {
    return displayManualOpenMessage(url, err);
  });
};
//# sourceMappingURL=openBrowser.js.map