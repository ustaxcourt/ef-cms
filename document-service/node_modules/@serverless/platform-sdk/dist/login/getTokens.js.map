{"version":3,"sources":["../../src/login/getTokens.js"],"names":["fetch","require","platformConfig","currentVersion","version","getTokens","code","body","JSON","stringify","redirect_uri","frontendUrl","backendUrl","method","headers","response","ok","text","Error","json","module","exports"],"mappings":";;;;AAAA,IAAMA,QAAQC,QAAQ,kBAAR,CAAd;AACA,IAAMC,iBAAiBD,QAAQ,WAAR,CAAvB;AACA,IAAME,iBAAiBF,QAAQ,oBAAR,EAA8BG,OAArD;;AAEA,IAAMC;AAAA,qEAAY,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACVC,gBADU,GACHC,KAAKC,SAAL,CAAe;AAC1BH,kBAD0B;AAE1BI,4BAAe,GAAER,eAAeS,WAAY;AAFlB,aAAf,CADG;AAAA;AAAA,mBAKOX,MAAO,GAAEE,eAAeU,UAAW,QAAnC,EAA4C;AACjEC,sBAAQ,MADyD;AAEjEN,kBAFiE;AAGjEO,uBAAS;AACP,gCAAgB,kBADT;AAEP,sCAAsBX;AAFf;AAHwD,aAA5C,CALP;;AAAA;AAKVY,oBALU;;AAAA,gBAcXA,SAASC,EAdE;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAeKD,SAASE,IAAT,EAfL;;AAAA;AAeRA,gBAfQ;AAAA,kBAgBR,IAAIC,KAAJ,CAAUD,IAAV,CAhBQ;;AAAA;AAAA,6CAkBTF,SAASI,IAAT,EAlBS;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAZ;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAqBAC,OAAOC,OAAP,GAAiBhB,SAAjB","file":"getTokens.js","sourcesContent":["const fetch = require('isomorphic-fetch')\nconst platformConfig = require('../config')\nconst currentVersion = require('../../package.json').version\n\nconst getTokens = async (code) => {\n  const body = JSON.stringify({\n    code,\n    redirect_uri: `${platformConfig.frontendUrl}callback`\n  })\n  const response = await fetch(`${platformConfig.backendUrl}tokens`, {\n    method: 'POST',\n    body,\n    headers: {\n      'Content-Type': 'application/json',\n      'x-platform-version': currentVersion\n    }\n  })\n\n  if (!response.ok) {\n    const text = await response.text()\n    throw new Error(text)\n  }\n  return response.json()\n}\n\nmodule.exports = getTokens\n"]}