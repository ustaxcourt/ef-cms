{"version":3,"sources":["../../src/deployments/updateDeployment.js"],"names":["fetch","require","platformConfig","currentVersion","version","updateDeployment","data","body","status","computedData","backendUrl","tenant","app","serviceName","deploymentId","method","JSON","stringify","headers","Authorization","accessKey","response","ok","text","Error","json"],"mappings":";;;;;;;;AAAA,IAAMA,QAAQC,QAAQ,kBAAR,CAAd;AACA,IAAMC,iBAAiBD,QAAQ,WAAR,CAAvB;AACA,IAAME,iBAAiBF,QAAQ,oBAAR,EAA8BG,OAArD;;AAEA,IAAMC;AAAA,qEAAmB,iBAAOC,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBC,gBADiB,GACV;AACXC,sBAAQF,KAAKE,MADF;AAEXC,4BAAcH,KAAKG;AAFR,aADU;AAAA;AAAA,mBAKAT,MACpB,GAAEE,eAAeQ,UAAW,WAAUJ,KAAKK,MAAO,iBAAgBL,KAAKM,GAAI,aAC1EN,KAAKO,WACN,gBAAeP,KAAKQ,YAAa,EAHb,EAIrB;AACEC,sBAAQ,KADV;AAEER,oBAAMS,KAAKC,SAAL,CAAeV,IAAf,CAFR;AAGEW,uBAAS;AACP,gCAAgB,kBADT;AAEP,sCAAsBf,cAFf;AAGPgB,+BAAgB,UAASb,KAAKc,SAAU;AAHjC;AAHX,aAJqB,CALA;;AAAA;AAKjBC,oBALiB;;AAAA,gBAoBlBA,SAASC,EApBS;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAqBFD,SAASE,IAAT,EArBE;;AAAA;AAqBfA,gBArBe;AAAA,kBAsBf,IAAIC,KAAJ,CAAUD,IAAV,CAtBe;;AAAA;AAAA,6CAyBhBF,SAASI,IAAT,EAzBgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAAA;AAAA;AAAA;AAAA,GAAN;;kBA4BepB,gB","file":"updateDeployment.js","sourcesContent":["const fetch = require('isomorphic-fetch')\nconst platformConfig = require('../config')\nconst currentVersion = require('../../package.json').version\n\nconst updateDeployment = async (data) => {\n  const body = {\n    status: data.status,\n    computedData: data.computedData\n  }\n  const response = await fetch(\n    `${platformConfig.backendUrl}tenants/${data.tenant}/applications/${data.app}/services/${\n      data.serviceName\n    }/deployments/${data.deploymentId}`,\n    {\n      method: 'PUT',\n      body: JSON.stringify(body),\n      headers: {\n        'Content-Type': 'application/json',\n        'x-platform-version': currentVersion,\n        Authorization: `bearer ${data.accessKey}`\n      }\n    }\n  )\n\n  if (!response.ok) {\n    const text = await response.text()\n    throw new Error(text)\n  }\n\n  return response.json()\n}\n\nexport default updateDeployment\n"]}