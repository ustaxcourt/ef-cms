!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.jstoxml=n.exports}}(this,function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=["_selfCloseTag","_attrs"],i=new RegExp(o.join("|"),"g"),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.repeat(t)},c=function(e){return Array.isArray(e)&&"array"||"object"===(void 0===e?"undefined":r(e))&&null!==e&&e._name&&"special-object"||e instanceof Date&&"date"||null===e&&"null"||(void 0===e?"undefined":r(e))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new RegExp("("+Object.keys(t).join("|")+")","g");return String(e).replace(n,function(e,n){return t[n]||""})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return Array.isArray(e)?e.map(function(e){var n=Object.keys(e)[0],r=e[n],o=t?u(r,t):r;return""+n+(!0===o?"":'="'+o+'"')}):Object.keys(e).map(function(n){var r=t?u(e[n],t):e[n];return""+n+(!0===e[n]?"":'="'+r+'"')})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=s(e,t);return 0===n.length?"":" "+n.join(" ")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return{_name:t,_content:e[t]}})},d=["string","number","boolean"],v=function(e){return d.includes(c(e))},p=[].concat(d,["date","special-object"]),y=function(e){return p.includes(c(e))},b=function(e){return!e.match("<")},m=function(e){var t=e.header,n=e.indent,o=(e.depth,e.isOutputStart);return t&&o?("boolean"===(void 0===t?"undefined":r(t))?'<?xml version="1.0" encoding="UTF-8"?>':t)+(n?"\n":""):""},h=e.toXML=function e(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=d.depth,h=void 0===p?0:p,g=d.indent,_=d._isFirstItem,j=(d._isLastItem,d.attributesFilter),O=d.header,k=d.filter,x=a(g,h),A=c(s),S=y(s),I=0===h&&(S||!S&&_),F="";switch(A){case"special-object":var L=s._name,w=s._content;if(null===w){F=L;break}if(Array.isArray(w)&&w.every(v))return w.map(function(t){return e({_name:L,_content:t},n({},d,{depth:h}))}).join("");if(L.match(i))break;var T=e(w,n({},d,{depth:h+1})),C=c(T),E=b(T),M=""+(g&&!I?"\n":"")+x,P="undefined"===C||""===T,R="boolean"===r(s._selfCloseTag)?P&&s._selfCloseTag:P,X=R?"/":"",D=f(s._attrs,j),U="<"+L+D+X+">",q=g&&!E?"\n"+x:"";F=""+M+U+(R?"":""+T+q+"</"+L+">");break;case"object":var z=Object.keys(s);F=z.map(function(r,i){var a=n({},d,{_isFirstItem:0===i,_isLastItem:i+1===z.length}),u={_name:r};if("object"===c(s[r])&&(o.forEach(function(e){var t=s[r][e];void 0!==t&&(u[e]=t,delete s[r][e])}),void 0!==s[r]._content&&Object.keys(s[r]).length>1)){var f=Object.assign({},s[r]);delete f._content,u._content=[].concat(t(l(f)),[s[r]._content])}return void 0===u._content&&(u._content=s[r]),e(u,a,r)},d).join("");break;case"function":var B=s(d);F=e(B,d);break;case"array":F=s.map(function(t,r){var o=n({},d,{_isFirstItem:0===r,_isLastItem:r+1===s.length});return e(t,o)}).join("");break;default:F=u(s,k)}return""+m({header:O,indent:g,depth:h,isOutputStart:I})+F};e.default={toXML:h}});